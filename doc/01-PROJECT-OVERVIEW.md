# NTPU 卫星 UAV Handover 可视化项目 - 项目概述

## 项目背景

从 ntn-stack 大型项目中提取"立体图"（3D View）核心功能，创建一个轻量化、专注的卫星-UAV 切换可视化系统。

## 项目目标

### 核心目标
1. **场景简化**：仅使用 NTPU (国立台北大学) 场景
2. **模型精简**：只使用 uav.glb 和 sat.glb 两个 3D 模型
3. **功能聚焦**：专注于 UAV 作为地面 UE 与卫星进行连接切换（handover）的可视化
4. **独立运行**：不依赖原项目的复杂后端系统

### 技术目标
- 使用 React + TypeScript + Three.js
- 实时 3D 渲染（60 FPS）
- 真实的 SGP4 卫星轨道计算
- 清晰的 handover 逻辑可视化

## 从原项目提取的核心功能

### 1. 3D 渲染引擎
- **技术栈**：Three.js + React Three Fiber
- **关键组件**：
  - StereogramView.tsx - 3D 场景容器
  - DynamicSatelliteRenderer.tsx - 卫星动态渲染
  - PredictionPath3D.tsx - 预测路径可视化

### 2. NTPU 场景配置
```
位置：国立台北大学
纬度：24.9441667°N
经度：121.3713889°E
海拔：50.0m
```

### 3. Handover 可视化逻辑
- 实时卫星位置追踪
- 信号强度计算（RSRP, RSRQ, SINR）
- 切换决策算法
- 可视化状态：
  - 当前连接（绿色）
  - 准备切换（橙色）
  - 目标卫星（蓝色）
  - 切换中（灰色）

### 4. 需要的 3D 资源
```
模型文件：
- uav.glb (10.3 MB) - UAV/无人机模型
- sat.glb (2.6 MB) - 卫星模型
- NTPU.glb (8.1 MB) - 台北大学场景

数据文件：
- TLE 数据（卫星轨道根数）
- 卫星时间序列数据（120分钟预测）
```

## 项目范围

### 包含的功能
✅ NTPU 3D 场景渲染
✅ 卫星实时位置计算与渲染
✅ UAV 模型与飞行路径
✅ 卫星-UAV 连接线可视化
✅ Handover 状态显示
✅ 基础交互控制（相机旋转、缩放）
✅ 时间加速控制

### 不包含的功能
❌ 多场景切换（NYCU, Nanliao, Lotus）
❌ 基站和干扰器设备
❌ 完整的网络模拟
❌ 数据库存储（MongoDB, Redis）
❌ 复杂的后端 API
❌ 用户认证系统

## 技术简化策略

### 原项目架构
```
User → React Frontend (Port 5173)
         ↓
      SimWorld Backend (Port 8888) ← MongoDB
         ↓
      NetStack API (Port 8080) ← Redis ← PostgreSQL
         ↓
      Orbit Engine
```

### 新项目架构（简化版）
```
User → React Frontend (Standalone)
         ↓
      Browser-based SGP4 计算
         ↓
      本地 TLE 数据文件
```

**关键简化点**：
1. 去除后端依赖，全部在前端实现
2. 使用浏览器端 SGP4 库（satellite.js）
3. TLE 数据静态化（JSON 文件）
4. 卫星池预计算（减少实时计算）

## 预期成果

### 最终交付物
1. 可独立运行的 React 应用
2. 清晰的 handover 可视化效果
3. 流畅的 3D 交互体验
4. 完整的技术文档

### 性能指标
- 渲染帧率：≥ 60 FPS
- 卫星数量：20-50 颗（可见范围内）
- 加载时间：< 5 秒
- 内存占用：< 500 MB

## 开发时程估算

- **阶段 1**：项目初始化与基础 3D 场景（2-3 天）
- **阶段 2**：卫星轨道计算与渲染（2-3 天）
- **阶段 3**：UAV 模型与连接线（1-2 天）
- **阶段 4**：Handover 逻辑实现（2-3 天）
- **阶段 5**：优化与完善（1-2 天）

**总计**：8-13 天

## 成功标准

1. ✅ 能够渲染 NTPU 场景
2. ✅ 实时显示可见卫星位置
3. ✅ UAV 与当前连接卫星显示连接线
4. ✅ Handover 事件有清晰的视觉反馈
5. ✅ 交互流畅无卡顿
6. ✅ 代码结构清晰易维护

## 风险评估

| 风险 | 影响 | 应对策略 |
|------|------|---------|
| 浏览器端 SGP4 计算性能不足 | 高 | 预计算+缓存策略 |
| 3D 模型文件过大 | 中 | 模型优化/简化 |
| Handover 算法复杂度高 | 中 | 先实现简化版本 |
| 学习曲线陡峭 | 低 | 逐步验证，小步迭代 |

---

**文档版本**：v1.0
**创建日期**：2025-10-28
**最后更新**：2025-10-28
